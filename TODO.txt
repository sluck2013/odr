check mem leak
    free hw_addr
    free malloc
